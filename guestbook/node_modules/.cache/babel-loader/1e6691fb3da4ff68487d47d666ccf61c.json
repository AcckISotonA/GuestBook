{"remainingRequest":"D:\\devel\\GuestBook\\guestbook\\node_modules\\babel-loader\\lib\\index.js!D:\\devel\\GuestBook\\guestbook\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\devel\\GuestBook\\guestbook\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\devel\\GuestBook\\guestbook\\src\\components\\Messages.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\devel\\GuestBook\\guestbook\\src\\components\\Messages.vue","mtime":1595860508850},{"path":"D:\\devel\\GuestBook\\guestbook\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\devel\\GuestBook\\guestbook\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\devel\\GuestBook\\guestbook\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\devel\\GuestBook\\guestbook\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3RvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5pcy1zYWZlLWludGVnZXIiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIk1lc3NhZ2VzIiwKICBwcm9wczogWyJwYWdlTnVtYmVyIiwgInNvcnRDb2x1bW4iLCAiZGVzY2VuZGluZ09yZGVyIl0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIC8vIEVsZW1lbnQgcmVzaXppbmcKICAgICAgdG9vbEJhckhlaWdodDogdW5kZWZpbmVkLAogICAgICB3aW5kb3dIZWlnaHQ6IDAsCiAgICAgIHBhZ2U6IDEsCiAgICAgIGhlYWRlcnM6IFt7CiAgICAgICAgdGV4dDogIiIsCiAgICAgICAgYWxpZ246ICJjZW50ZXIiLAogICAgICAgIHNvcnRhYmxlOiBmYWxzZSwKICAgICAgICB2YWx1ZTogImluZGV4IiwKICAgICAgICBkaXZpZGVyOiB0cnVlCiAgICAgIH0sIHsKICAgICAgICB0ZXh0OiAi0JTQsNGC0LAg0LTQvtCx0LDQstC70LXQvdC40Y8iLAogICAgICAgIGFsaWduOiAiY2VudGVyIiwKICAgICAgICBzb3J0YWJsZTogdHJ1ZSwKICAgICAgICB2YWx1ZTogImRhdGVDIiwKICAgICAgICBkaXZpZGVyOiB0cnVlCiAgICAgIH0sIHsKICAgICAgICB0ZXh0OiAi0JjQvNGPINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjyIsCiAgICAgICAgYWxpZ246ICJzdGFydCIsCiAgICAgICAgc29ydGFibGU6IHRydWUsCiAgICAgICAgdmFsdWU6ICJ1c2VyTmFtZSIsCiAgICAgICAgZGl2aWRlcjogdHJ1ZQogICAgICB9LCB7CiAgICAgICAgdGV4dDogIkUtbWFpbCIsCiAgICAgICAgYWxpZ246ICJzdGFydCIsCiAgICAgICAgc29ydGFibGU6IHRydWUsCiAgICAgICAgdmFsdWU6ICJlbWFpbCIsCiAgICAgICAgZGl2aWRlcjogdHJ1ZQogICAgICB9LCB7CiAgICAgICAgdGV4dDogItCi0LXQutGB0YIiLAogICAgICAgIGFsaWduOiAic3RhcnQiLAogICAgICAgIHNvcnRhYmxlOiBmYWxzZSwKICAgICAgICB2YWx1ZTogInRleHQiLAogICAgICAgIGRpdmlkZXI6IHRydWUKICAgICAgfV0sCiAgICAgIG1lc3NhZ2VMaXN0OiBbXSwKICAgICAgcm93c0NvdW50OiAwLAogICAgICByb3dzUGVyUGFnZTogMjUsCiAgICAgIG9wdGlvbnM6IHsKICAgICAgICBtdXN0U29ydDogdHJ1ZQogICAgICB9LAogICAgICBsb2FkaW5nOiBmYWxzZQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICB0YWJsZUhlaWdodDogZnVuY3Rpb24gdGFibGVIZWlnaHQoKSB7CiAgICAgIGlmICh0aGlzLnRvb2xCYXJIZWlnaHQgIT09IHVuZGVmaW5lZCkgcmV0dXJuIHRoaXMud2luZG93SGVpZ2h0IC0gdGhpcy50b29sQmFySGVpZ2h0IC0gNTk7CiAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICB9LAogICAgaXNYUzogZnVuY3Rpb24gaXNYUygpIHsKICAgICAgcmV0dXJuIHRoaXMuJHZ1ZXRpZnkuYnJlYWtwb2ludC54czsKICAgIH0sCiAgICBjcmVhdGVNZXNzYWdlUGF0aDogZnVuY3Rpb24gY3JlYXRlTWVzc2FnZVBhdGgoKSB7CiAgICAgIHJldHVybiAiL2NyZWF0ZS1tZXNzYWdlLyIgKyB0aGlzLnBhZ2luZyh0aGlzLnBhZ2VOdW1iZXIsIHRoaXMuc29ydENvbHVtbiwgdGhpcy5kZXNjZW5kaW5nT3JkZXIpOwogICAgfSwKICAgIHBhZ2VDb3VudDogZnVuY3Rpb24gcGFnZUNvdW50KCkgewogICAgICBpZiAodGhpcy5yb3dzQ291bnQgPiAwKSByZXR1cm4gTWF0aC5jZWlsKHRoaXMucm93c0NvdW50IC8gdGhpcy5yb3dzUGVyUGFnZSk7ZWxzZSByZXR1cm4gMTsKICAgIH0sCiAgICBpc0Rlc2NlbmRpbmdPcmRlcjogZnVuY3Rpb24gaXNEZXNjZW5kaW5nT3JkZXIoKSB7CiAgICAgIHJldHVybiB0aGlzLmRlc2NlbmRpbmdPcmRlciA9PSAidHJ1ZSIgPyB0cnVlIDogdGhpcy5kZXNjZW5kaW5nT3JkZXIgPT0gImZhbHNlIiA/IGZhbHNlIDogdW5kZWZpbmVkOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlV2luZG93UmVzaXplOiBmdW5jdGlvbiBoYW5kbGVXaW5kb3dSZXNpemUoKSB7CiAgICAgIHRoaXMud2luZG93SGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0OwogICAgfSwKICAgIHBhZ2luZzogZnVuY3Rpb24gcGFnaW5nKHBhZ2VOdW1iZXIsIHNvcnRDb2x1bW4sIGRlc2NlbmRpbmdPcmRlcikgewogICAgICByZXR1cm4gcGFnZU51bWJlciArICImIiArIHNvcnRDb2x1bW4gKyAiJiIgKyBkZXNjZW5kaW5nT3JkZXI7CiAgICB9LAogICAgbG9jYWxlRGF0ZVRpbWVTdHJpbmc6IGZ1bmN0aW9uIGxvY2FsZURhdGVUaW1lU3RyaW5nKGRhdGUpIHsKICAgICAgcmV0dXJuIG5ldyBEYXRlKGRhdGUpLnRvTG9jYWxlU3RyaW5nKCk7CiAgICB9LAogICAgbG9hZE1lc3NhZ2VMaXN0OiBmdW5jdGlvbiBsb2FkTWVzc2FnZUxpc3QoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgb3B0aW9ucyA9IHsKICAgICAgICBQYWdlTnVtYmVyOiBOdW1iZXIodGhpcy5wYWdlTnVtYmVyKSwKICAgICAgICBQYWdlU2l6ZTogdGhpcy5yb3dzUGVyUGFnZSwKICAgICAgICBTb3J0Q29sdW1uOiB0aGlzLnNvcnRDb2x1bW4sCiAgICAgICAgRGVzY2VuZGluZ09yZGVyOiB0aGlzLmlzRGVzY2VuZGluZ09yZGVyCiAgICAgIH07CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJtZXNzYWdlcy9nZXRNZXNzYWdlcyIsIG9wdGlvbnMpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbmNlKSB7CiAgICAgICAgX3RoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgIF90aGlzLm1lc3NhZ2VMaXN0ID0gcmVzcG9uY2UuZGF0YS5tZXNzYWdlTGlzdDsKICAgICAgICBfdGhpcy5yb3dzQ291bnQgPSByZXNwb25jZS5kYXRhLnJvd3NDb3VudDsKICAgICAgICBfdGhpcy5vcHRpb25zLnBhZ2UgPSBvcHRpb25zLlBhZ2VOdW1iZXI7CiAgICAgICAgX3RoaXMucGFnZSA9IG9wdGlvbnMuUGFnZU51bWJlcjsKICAgICAgICBfdGhpcy5vcHRpb25zLnNvcnRCeSA9IFtvcHRpb25zLlNvcnRDb2x1bW5dOwogICAgICAgIF90aGlzLm9wdGlvbnMuc29ydERlc2MgPSBbb3B0aW9ucy5EZXNjZW5kaW5nT3JkZXJdOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICBwYWdlQ2xpY2tlZDogZnVuY3Rpb24gcGFnZUNsaWNrZWQocGFnZSkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGlmICh0aGlzLnBhZ2UgIT09IHBhZ2UpIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL21lc3NhZ2VzLyIgKyB0aGlzLnBhZ2luZyhwYWdlLCB0aGlzLnNvcnRDb2x1bW4sIHRoaXMuZGVzY2VuZGluZ09yZGVyKSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpczIubG9hZE1lc3NhZ2VMaXN0KCk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkge30pOwogICAgICB9CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgb3B0aW9uczogZnVuY3Rpb24gb3B0aW9ucygpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICBpZiAodGhpcy5vcHRpb25zLnNvcnRCeVswXSAmJiB0aGlzLm9wdGlvbnMuc29ydERlc2NbMF0gIT09IHVuZGVmaW5lZCAmJiAodGhpcy5vcHRpb25zLnNvcnRCeVswXSAhPT0gdGhpcy5zb3J0Q29sdW1uIHx8IHRoaXMub3B0aW9ucy5zb3J0RGVzY1swXSAhPT0gdGhpcy5pc0Rlc2NlbmRpbmdPcmRlcikpIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL21lc3NhZ2VzLyIgKyB0aGlzLnBhZ2luZygxLCB0aGlzLm9wdGlvbnMuc29ydEJ5WzBdLCB0aGlzLm9wdGlvbnMuc29ydERlc2NbMF0pKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzMy5sb2FkTWVzc2FnZUxpc3QoKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7fSk7CiAgICAgIH0KICAgIH0KICB9LAogIGRlc3Ryb3llZDogZnVuY3Rpb24gZGVzdHJveWVkKCkgewogICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoInJlc2l6ZSIsIHRoaXMuaGFuZGxlV2luZG93UmVzaXplKTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigicmVzaXplIiwgdGhpcy5oYW5kbGVXaW5kb3dSZXNpemUpOwogICAgdGhpcy5oYW5kbGVXaW5kb3dSZXNpemUoKTsKICAgIHRoaXMudG9vbEJhckhlaWdodCA9IHRoaXMuJHJlZnMubXNnTGlzdFRvb2xiYXIuY29tcHV0ZWRDb250ZW50SGVpZ2h0OwoKICAgIGlmICghTnVtYmVyLmlzU2FmZUludGVnZXIoTnVtYmVyKHRoaXMucGFnZU51bWJlcikpIHx8ICF0aGlzLmhlYWRlcnMuZmluZChmdW5jdGlvbiAoaXRlbSkgewogICAgICByZXR1cm4gaXRlbS52YWx1ZSA9PT0gX3RoaXM0LnNvcnRDb2x1bW47CiAgICB9KSB8fCB0aGlzLmlzRGVzY2VuZGluZ09yZGVyID09PSB1bmRlZmluZWQpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9tZXNzYWdlcy8iICsgdGhpcy5wYWdpbmcoMSwgInVzZXJOYW1lIiwgZmFsc2UpKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczQubG9hZE1lc3NhZ2VMaXN0KCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHt9KTsKICAgIH0gZWxzZSB0aGlzLmxvYWRNZXNzYWdlTGlzdCgpOwogIH0KfTs="},{"version":3,"sources":["Messages.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <v-card dark flat class=\"fill-height\" tile>\r\n    <v-toolbar ref=\"msgListToolbar\" color=\"primary\" dense flat>\r\n      <v-toolbar-title>Список сообщений</v-toolbar-title>\r\n      <v-spacer />\r\n      <v-btn :icon=\"isXS\" :to=\"createMessagePath\" text>\r\n        <v-icon :left=\"!isXS\">mdi-pen</v-icon>\r\n        {{isXS ? '' : 'Добавить сообщение'}}\r\n      </v-btn>\r\n    </v-toolbar>\r\n    <v-data-table\r\n      :height=\"tableHeight\"\r\n      :headers=\"headers\"\r\n      :items=\"messageList\"\r\n      :server-items-length=\"rowsCount\"\r\n      :options.sync=\"options\"\r\n      :loading=\"loading\"\r\n      hide-default-footer\r\n      dense\r\n    >\r\n      <template\r\n        v-slot:item.index=\"{ item }\"\r\n      >{{(page - 1) * rowsPerPage + messageList.indexOf(item) + 1}}</template>\r\n      <template v-slot:item.dateC=\"{ item }\">{{localeDateTimeString(item.dateC)}}</template>\r\n      <template v-slot:item.text=\"{ item }\">{{decodeURI(item.text)}}</template>\r\n    </v-data-table>\r\n    <v-pagination :value=\"page\" :length=\"pageCount\" @input=\"pageClicked($event)\" />\r\n  </v-card>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"Messages\",\r\n\r\n  props: [\"pageNumber\", \"sortColumn\", \"descendingOrder\"],\r\n\r\n  data() {\r\n    return {\r\n      // Element resizing\r\n      toolBarHeight: undefined,\r\n      windowHeight: 0,\r\n\r\n      page: 1,\r\n      headers: [\r\n        {\r\n          text: \"\",\r\n          align: \"center\",\r\n          sortable: false,\r\n          value: \"index\",\r\n          divider: true,\r\n        },\r\n        {\r\n          text: \"Дата добавления\",\r\n          align: \"center\",\r\n          sortable: true,\r\n          value: \"dateC\",\r\n          divider: true,\r\n        },\r\n        {\r\n          text: \"Имя пользователя\",\r\n          align: \"start\",\r\n          sortable: true,\r\n          value: \"userName\",\r\n          divider: true,\r\n        },\r\n        {\r\n          text: \"E-mail\",\r\n          align: \"start\",\r\n          sortable: true,\r\n          value: \"email\",\r\n          divider: true,\r\n        },\r\n        {\r\n          text: \"Текст\",\r\n          align: \"start\",\r\n          sortable: false,\r\n          value: \"text\",\r\n          divider: true,\r\n        },\r\n      ],\r\n      messageList: [],\r\n      rowsCount: 0,\r\n      rowsPerPage: 25,\r\n      options: { mustSort: true },\r\n      loading: false,\r\n    };\r\n  },\r\n  computed: {\r\n    tableHeight() {\r\n      if (this.toolBarHeight !== undefined)\r\n        return this.windowHeight - this.toolBarHeight - 59;\r\n      return undefined;\r\n    },\r\n    isXS() {\r\n      return this.$vuetify.breakpoint.xs;\r\n    },\r\n\r\n    createMessagePath() {\r\n      return (\r\n        \"/create-message/\" +\r\n        this.paging(this.pageNumber, this.sortColumn, this.descendingOrder)\r\n      );\r\n    },\r\n\r\n    pageCount() {\r\n      if (this.rowsCount > 0)\r\n        return Math.ceil(this.rowsCount / this.rowsPerPage);\r\n      else return 1;\r\n    },\r\n\r\n    isDescendingOrder() {\r\n      return this.descendingOrder == \"true\"\r\n        ? true\r\n        : this.descendingOrder == \"false\"\r\n        ? false\r\n        : undefined;\r\n    },\r\n  },\r\n  methods: {\r\n    handleWindowResize() {\r\n      this.windowHeight = window.innerHeight;\r\n    },\r\n    paging(pageNumber, sortColumn, descendingOrder) {\r\n      return pageNumber + \"&\" + sortColumn + \"&\" + descendingOrder;\r\n    },\r\n\r\n    localeDateTimeString(date) {\r\n      return new Date(date).toLocaleString();\r\n    },\r\n\r\n    loadMessageList() {\r\n      let options = {\r\n        PageNumber: Number(this.pageNumber),\r\n        PageSize: this.rowsPerPage,\r\n        SortColumn: this.sortColumn,\r\n        DescendingOrder: this.isDescendingOrder,\r\n      };\r\n\r\n      this.loading = true;\r\n      this.$store\r\n        .dispatch(\"messages/getMessages\", options)\r\n        .then((responce) => {\r\n          this.loading = false;\r\n          this.messageList = responce.data.messageList;\r\n          this.rowsCount = responce.data.rowsCount;\r\n          this.options.page = options.PageNumber;\r\n          this.page = options.PageNumber;\r\n          this.options.sortBy = [options.SortColumn];\r\n          this.options.sortDesc = [options.DescendingOrder];\r\n        })\r\n        .catch(() => {\r\n          this.loading = false;\r\n        });\r\n    },\r\n\r\n    pageClicked(page) {\r\n      if (this.page !== page) {\r\n        this.$router\r\n          .push(\r\n            \"/messages/\" +\r\n              this.paging(page, this.sortColumn, this.descendingOrder)\r\n          )\r\n          .then(() => {\r\n            this.loadMessageList();\r\n          })\r\n          .catch(() => {});\r\n      }\r\n    },\r\n  },\r\n  watch: {\r\n    options: function () {\r\n      if (\r\n        this.options.sortBy[0] &&\r\n        this.options.sortDesc[0] !== undefined &&\r\n        (this.options.sortBy[0] !== this.sortColumn ||\r\n          this.options.sortDesc[0] !== this.isDescendingOrder)\r\n      ) {\r\n        this.$router\r\n          .push(\r\n            \"/messages/\" +\r\n              this.paging(1, this.options.sortBy[0], this.options.sortDesc[0])\r\n          )\r\n          .then(() => {\r\n            this.loadMessageList();\r\n          })\r\n          .catch(() => {});\r\n      }\r\n    },\r\n  },\r\n  destroyed() {\r\n    window.removeEventListener(\"resize\", this.handleWindowResize);\r\n  },\r\n  mounted() {\r\n    window.addEventListener(\"resize\", this.handleWindowResize);\r\n    this.handleWindowResize();\r\n    this.toolBarHeight = this.$refs.msgListToolbar.computedContentHeight;\r\n\r\n    if (\r\n      !Number.isSafeInteger(Number(this.pageNumber)) ||\r\n      !this.headers.find((item) => item.value === this.sortColumn) ||\r\n      this.isDescendingOrder === undefined\r\n    ) {\r\n      this.$router\r\n        .push(\"/messages/\" + this.paging(1, \"userName\", false))\r\n        .then(() => {\r\n          this.loadMessageList();\r\n        })\r\n        .catch(() => {});\r\n    } else this.loadMessageList();\r\n  },\r\n};\r\n</script>"],"sourceRoot":"src/components"}]}