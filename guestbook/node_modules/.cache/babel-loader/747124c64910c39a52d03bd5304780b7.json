{"remainingRequest":"D:\\devel\\VS\\2019\\guestbook\\node_modules\\babel-loader\\lib\\index.js!D:\\devel\\VS\\2019\\guestbook\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\devel\\VS\\2019\\guestbook\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\devel\\VS\\2019\\guestbook\\src\\components\\Messages.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\devel\\VS\\2019\\guestbook\\src\\components\\Messages.vue","mtime":1595766711800},{"path":"D:\\devel\\VS\\2019\\guestbook\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\devel\\VS\\2019\\guestbook\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\devel\\VS\\2019\\guestbook\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\devel\\VS\\2019\\guestbook\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJNZXNzYWdlcyIsCiAgcHJvcHM6IFsicGFnZU51bWJlciIsICJzb3J0Q29sdW1uIiwgImRlc2NlbmRpbmdPcmRlciJdLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICAvLyBFbGVtZW50IHJlc2l6aW5nCiAgICAgIHRvb2xCYXJIZWlnaHQ6IHVuZGVmaW5lZCwKICAgICAgd2luZG93SGVpZ2h0OiAwLAogICAgICBoZWFkZXJzOiBbewogICAgICAgIHRleHQ6ICLQlNCw0YLQsCDQtNC+0LHQsNCy0LvQtdC90LjRjyIsCiAgICAgICAgYWxpZ246ICJjZW50ZXIiLAogICAgICAgIHNvcnRhYmxlOiB0cnVlLAogICAgICAgIHZhbHVlOiAiZGF0ZUMiCiAgICAgIH0sIHsKICAgICAgICB0ZXh0OiAi0JjQvNGPINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjyIsCiAgICAgICAgYWxpZ246ICJzdGFydCIsCiAgICAgICAgc29ydGFibGU6IHRydWUsCiAgICAgICAgdmFsdWU6ICJ1c2VyTmFtZSIKICAgICAgfSwgewogICAgICAgIHRleHQ6ICJFLW1haWwiLAogICAgICAgIGFsaWduOiAic3RhcnQiLAogICAgICAgIHNvcnRhYmxlOiB0cnVlLAogICAgICAgIHZhbHVlOiAiZW1haWwiCiAgICAgIH0sIHsKICAgICAgICB0ZXh0OiAi0KLQtdC60YHRgiIsCiAgICAgICAgYWxpZ246ICJzdGFydCIsCiAgICAgICAgc29ydGFibGU6IGZhbHNlLAogICAgICAgIHZhbHVlOiAidGV4dCIKICAgICAgfV0sCiAgICAgIG1lc3NhZ2VMaXN0OiBbXSwKICAgICAgcm93c0NvdW50OiAwLAogICAgICBvcHRpb25zOiBudWxsCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHRhYmxlSGVpZ2h0OiBmdW5jdGlvbiB0YWJsZUhlaWdodCgpIHsKICAgICAgaWYgKHRoaXMudG9vbEJhckhlaWdodCAhPT0gdW5kZWZpbmVkKSByZXR1cm4gdGhpcy53aW5kb3dIZWlnaHQgLSB0aGlzLnRvb2xCYXJIZWlnaHQgLSA1OTsKICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKICAgIH0sCiAgICBpc1hTOiBmdW5jdGlvbiBpc1hTKCkgewogICAgICByZXR1cm4gdGhpcy4kdnVldGlmeS5icmVha3BvaW50LnhzOwogICAgfSwKICAgIGNyZWF0ZU1lc3NhZ2VQYXRoOiBmdW5jdGlvbiBjcmVhdGVNZXNzYWdlUGF0aCgpIHsKICAgICAgcmV0dXJuICIvY3JlYXRlLW1lc3NhZ2UvIiArIHRoaXMucGFnaW5nKHRoaXMucGFnZU51bWJlciwgdGhpcy5zb3J0Q29sdW1uLCB0aGlzLmRlc2NlbmRpbmdPcmRlcik7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVXaW5kb3dSZXNpemU6IGZ1bmN0aW9uIGhhbmRsZVdpbmRvd1Jlc2l6ZSgpIHsKICAgICAgdGhpcy53aW5kb3dIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7CiAgICB9LAogICAgcGFnaW5nOiBmdW5jdGlvbiBwYWdpbmcocGFnZU51bWJlciwgc29ydENvbHVtbiwgZGVzY2VuZGluZ09yZGVyKSB7CiAgICAgIHJldHVybiBwYWdlTnVtYmVyICsgIiwiICsgc29ydENvbHVtbiArICIsIiArIGRlc2NlbmRpbmdPcmRlcjsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBvcHRpb25zOiBmdW5jdGlvbiBvcHRpb25zKCkgewogICAgICBjb25zb2xlLmluZm8odGhpcy5vcHRpb25zLnBhZ2UsIE51bWJlcih0aGlzLnBhZ2VOdW1iZXIpLCB0aGlzLm9wdGlvbnMuc29ydEJ5WzBdLCB0aGlzLnNvcnRDb2x1bW4pOwoKICAgICAgaWYgKHRoaXMub3B0aW9ucy5wYWdlICE9PSBOdW1iZXIodGhpcy5wYWdlTnVtYmVyKSkgewogICAgICAgIGNvbnNvbGUudHJhY2UoKTsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL21lc3NhZ2VzLyIgKyB0aGlzLnBhZ2luZyh0aGlzLnBhZ2VOdW1iZXIsIHRoaXMuc29ydENvbHVtbiwgdGhpcy5kZXNjZW5kaW5nT3JkZXIpKS5jYXRjaChmdW5jdGlvbiAoKSB7fSk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5vcHRpb25zLnNvcnRCeVswXSAhPT0gdGhpcy5zb3J0Q29sdW1uIHx8IHRoaXMub3B0aW9ucy5zb3J0RGVzY1swXSAhPT0gQm9vbGVhbih0aGlzLkRlc2NlbmRpbmdPcmRlcikpIHsKICAgICAgICBjb25zb2xlLnRyYWNlKCk7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9tZXNzYWdlcy8iICsgdGhpcy5wYWdpbmcoMSwgdGhpcy5zb3J0Q29sdW1uLCB0aGlzLmRlc2NlbmRpbmdPcmRlcikpLmNhdGNoKGZ1bmN0aW9uICgpIHt9KTsKICAgICAgfQogICAgfQogIH0sCiAgZGVzdHJveWVkOiBmdW5jdGlvbiBkZXN0cm95ZWQoKSB7CiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigicmVzaXplIiwgdGhpcy5oYW5kbGVXaW5kb3dSZXNpemUpOwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInJlc2l6ZSIsIHRoaXMuaGFuZGxlV2luZG93UmVzaXplKTsKICAgIHRoaXMuaGFuZGxlV2luZG93UmVzaXplKCk7CiAgICB0aGlzLnRvb2xCYXJIZWlnaHQgPSB0aGlzLiRyZWZzLm1zZ0xpc3RUb29sYmFyLmNvbXB1dGVkQ29udGVudEhlaWdodDsKICAgIHZhciBvcHRpb25zID0gewogICAgICBQYWdlTnVtYmVyOiBOdW1iZXIodGhpcy5wYWdlTnVtYmVyKSwKICAgICAgUGFnZVNpemU6IDI1LAogICAgICBTb3J0Q29sdW1uOiB0aGlzLnNvcnRDb2x1bW4sCiAgICAgIERlc2NlbmRpbmdPcmRlcjogQm9vbGVhbih0aGlzLkRlc2NlbmRpbmdPcmRlcikKICAgIH07CiAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgibWVzc2FnZXMvZ2V0TWVzc2FnZXMiLCBvcHRpb25zKS50aGVuKGZ1bmN0aW9uIChyZXNwb25jZSkgewogICAgICBfdGhpcy5tZXNzYWdlTGlzdCA9IHJlc3BvbmNlLmRhdGEubWVzc2FnZUxpc3Q7CiAgICAgIF90aGlzLnJvd3NDb3VudCA9IHJlc3BvbmNlLmRhdGEucm93c0NvdW50OwogICAgICBfdGhpcy5vcHRpb25zLnBhZ2UgPSBvcHRpb25zLlBhZ2VOdW1iZXI7CiAgICAgIF90aGlzLm9wdGlvbnMuc29ydEJ5ID0gW29wdGlvbnMuU29ydENvbHVtbl07CiAgICAgIF90aGlzLm9wdGlvbnMuc29ydERlc2MgPSBbb3B0aW9ucy5EZXNjZW5kaW5nT3JkZXJdOwogICAgfSk7CiAgfQp9Ow=="},{"version":3,"sources":["Messages.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <v-card dark flat class=\"fill-height\" tile>\r\n    <v-toolbar ref=\"msgListToolbar\" color=\"primary\" dense flat>\r\n      <v-toolbar-title>Список сообщений</v-toolbar-title>\r\n      <v-spacer />\r\n      <v-btn :icon=\"isXS\" :to=\"createMessagePath\" text>\r\n        <v-icon :left=\"!isXS\">mdi-pen</v-icon>\r\n        {{isXS ? '' : 'Добавить сообщение'}}\r\n      </v-btn>\r\n    </v-toolbar>\r\n    <v-data-table\r\n      :height=\"tableHeight\"\r\n      :headers=\"headers\"\r\n      :items=\"messageList\"\r\n      :server-items-length=\"rowsCount\"\r\n      :options.sync=\"options\"\r\n    />\r\n  </v-card>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"Messages\",\r\n\r\n  props: [\"pageNumber\", \"sortColumn\", \"descendingOrder\"],\r\n\r\n  data() {\r\n    return {\r\n      // Element resizing\r\n      toolBarHeight: undefined,\r\n      windowHeight: 0,\r\n\r\n      headers: [\r\n        {\r\n          text: \"Дата добавления\",\r\n          align: \"center\",\r\n          sortable: true,\r\n          value: \"dateC\",\r\n        },\r\n        {\r\n          text: \"Имя пользователя\",\r\n          align: \"start\",\r\n          sortable: true,\r\n          value: \"userName\",\r\n        },\r\n        { text: \"E-mail\", align: \"start\", sortable: true, value: \"email\" },\r\n        { text: \"Текст\", align: \"start\", sortable: false, value: \"text\" },\r\n      ],\r\n      messageList: [],\r\n      rowsCount: 0,\r\n      options: null,\r\n    };\r\n  },\r\n  computed: {\r\n    tableHeight() {\r\n      if (this.toolBarHeight !== undefined)\r\n        return this.windowHeight - this.toolBarHeight - 59;\r\n      return undefined;\r\n    },\r\n    isXS() {\r\n      return this.$vuetify.breakpoint.xs;\r\n    },\r\n\r\n    createMessagePath() {\r\n      return (\r\n        \"/create-message/\" +\r\n        this.paging(this.pageNumber, this.sortColumn, this.descendingOrder)\r\n      );\r\n    },\r\n  },\r\n  methods: {\r\n    handleWindowResize() {\r\n      this.windowHeight = window.innerHeight;\r\n    },\r\n    paging(pageNumber, sortColumn, descendingOrder) {\r\n      return pageNumber + \",\" + sortColumn + \",\" + descendingOrder;\r\n    },\r\n  },\r\n  watch: {\r\n    options: function () {\r\n      console.info(\r\n        this.options.page,\r\n        Number(this.pageNumber),\r\n        this.options.sortBy[0],\r\n        this.sortColumn\r\n      );\r\n      if (this.options.page !== Number(this.pageNumber)) {\r\n        console.trace();\r\n        this.$router\r\n          .push(\r\n            \"/messages/\" +\r\n              this.paging(\r\n                this.pageNumber,\r\n                this.sortColumn,\r\n                this.descendingOrder\r\n              )\r\n          )\r\n          .catch(() => {});\r\n      } else if (\r\n        this.options.sortBy[0] !== this.sortColumn ||\r\n        this.options.sortDesc[0] !== Boolean(this.DescendingOrder)\r\n      ) {\r\n        console.trace();\r\n        this.$router\r\n          .push(\r\n            \"/messages/\" + this.paging(1, this.sortColumn, this.descendingOrder)\r\n          )\r\n          .catch(() => {});\r\n      }\r\n    },\r\n  },\r\n  destroyed() {\r\n    window.removeEventListener(\"resize\", this.handleWindowResize);\r\n  },\r\n  mounted() {\r\n    window.addEventListener(\"resize\", this.handleWindowResize);\r\n    this.handleWindowResize();\r\n    this.toolBarHeight = this.$refs.msgListToolbar.computedContentHeight;\r\n    let options = {\r\n      PageNumber: Number(this.pageNumber),\r\n      PageSize: 25,\r\n      SortColumn: this.sortColumn,\r\n      DescendingOrder: Boolean(this.DescendingOrder),\r\n    };\r\n\r\n    this.$store.dispatch(\"messages/getMessages\", options).then((responce) => {\r\n      this.messageList = responce.data.messageList;\r\n      this.rowsCount = responce.data.rowsCount;\r\n      this.options.page = options.PageNumber;\r\n      this.options.sortBy = [options.SortColumn];\r\n      this.options.sortDesc = [options.DescendingOrder];\r\n    });\r\n  },\r\n};\r\n</script>"],"sourceRoot":"src/components"}]}