{"remainingRequest":"D:\\devel\\VS\\2019\\guestbook\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\devel\\VS\\2019\\guestbook\\src\\components\\Messages.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\devel\\VS\\2019\\guestbook\\src\\components\\Messages.vue","mtime":1595766711800},{"path":"D:\\devel\\VS\\2019\\guestbook\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\devel\\VS\\2019\\guestbook\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\devel\\VS\\2019\\guestbook\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\devel\\VS\\2019\\guestbook\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJNZXNzYWdlcyIsDQoNCiAgcHJvcHM6IFsicGFnZU51bWJlciIsICJzb3J0Q29sdW1uIiwgImRlc2NlbmRpbmdPcmRlciJdLA0KDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIC8vIEVsZW1lbnQgcmVzaXppbmcNCiAgICAgIHRvb2xCYXJIZWlnaHQ6IHVuZGVmaW5lZCwNCiAgICAgIHdpbmRvd0hlaWdodDogMCwNCg0KICAgICAgaGVhZGVyczogWw0KICAgICAgICB7DQogICAgICAgICAgdGV4dDogItCU0LDRgtCwINC00L7QsdCw0LLQu9C10L3QuNGPIiwNCiAgICAgICAgICBhbGlnbjogImNlbnRlciIsDQogICAgICAgICAgc29ydGFibGU6IHRydWUsDQogICAgICAgICAgdmFsdWU6ICJkYXRlQyIsDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICB0ZXh0OiAi0JjQvNGPINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjyIsDQogICAgICAgICAgYWxpZ246ICJzdGFydCIsDQogICAgICAgICAgc29ydGFibGU6IHRydWUsDQogICAgICAgICAgdmFsdWU6ICJ1c2VyTmFtZSIsDQogICAgICAgIH0sDQogICAgICAgIHsgdGV4dDogIkUtbWFpbCIsIGFsaWduOiAic3RhcnQiLCBzb3J0YWJsZTogdHJ1ZSwgdmFsdWU6ICJlbWFpbCIgfSwNCiAgICAgICAgeyB0ZXh0OiAi0KLQtdC60YHRgiIsIGFsaWduOiAic3RhcnQiLCBzb3J0YWJsZTogZmFsc2UsIHZhbHVlOiAidGV4dCIgfSwNCiAgICAgIF0sDQogICAgICBtZXNzYWdlTGlzdDogW10sDQogICAgICByb3dzQ291bnQ6IDAsDQogICAgICBvcHRpb25zOiBudWxsLA0KICAgIH07DQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgdGFibGVIZWlnaHQoKSB7DQogICAgICBpZiAodGhpcy50b29sQmFySGVpZ2h0ICE9PSB1bmRlZmluZWQpDQogICAgICAgIHJldHVybiB0aGlzLndpbmRvd0hlaWdodCAtIHRoaXMudG9vbEJhckhlaWdodCAtIDU5Ow0KICAgICAgcmV0dXJuIHVuZGVmaW5lZDsNCiAgICB9LA0KICAgIGlzWFMoKSB7DQogICAgICByZXR1cm4gdGhpcy4kdnVldGlmeS5icmVha3BvaW50LnhzOw0KICAgIH0sDQoNCiAgICBjcmVhdGVNZXNzYWdlUGF0aCgpIHsNCiAgICAgIHJldHVybiAoDQogICAgICAgICIvY3JlYXRlLW1lc3NhZ2UvIiArDQogICAgICAgIHRoaXMucGFnaW5nKHRoaXMucGFnZU51bWJlciwgdGhpcy5zb3J0Q29sdW1uLCB0aGlzLmRlc2NlbmRpbmdPcmRlcikNCiAgICAgICk7DQogICAgfSwNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGhhbmRsZVdpbmRvd1Jlc2l6ZSgpIHsNCiAgICAgIHRoaXMud2luZG93SGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0Ow0KICAgIH0sDQogICAgcGFnaW5nKHBhZ2VOdW1iZXIsIHNvcnRDb2x1bW4sIGRlc2NlbmRpbmdPcmRlcikgew0KICAgICAgcmV0dXJuIHBhZ2VOdW1iZXIgKyAiLCIgKyBzb3J0Q29sdW1uICsgIiwiICsgZGVzY2VuZGluZ09yZGVyOw0KICAgIH0sDQogIH0sDQogIHdhdGNoOiB7DQogICAgb3B0aW9uczogZnVuY3Rpb24gKCkgew0KICAgICAgY29uc29sZS5pbmZvKA0KICAgICAgICB0aGlzLm9wdGlvbnMucGFnZSwNCiAgICAgICAgTnVtYmVyKHRoaXMucGFnZU51bWJlciksDQogICAgICAgIHRoaXMub3B0aW9ucy5zb3J0QnlbMF0sDQogICAgICAgIHRoaXMuc29ydENvbHVtbg0KICAgICAgKTsNCiAgICAgIGlmICh0aGlzLm9wdGlvbnMucGFnZSAhPT0gTnVtYmVyKHRoaXMucGFnZU51bWJlcikpIHsNCiAgICAgICAgY29uc29sZS50cmFjZSgpOw0KICAgICAgICB0aGlzLiRyb3V0ZXINCiAgICAgICAgICAucHVzaCgNCiAgICAgICAgICAgICIvbWVzc2FnZXMvIiArDQogICAgICAgICAgICAgIHRoaXMucGFnaW5nKA0KICAgICAgICAgICAgICAgIHRoaXMucGFnZU51bWJlciwNCiAgICAgICAgICAgICAgICB0aGlzLnNvcnRDb2x1bW4sDQogICAgICAgICAgICAgICAgdGhpcy5kZXNjZW5kaW5nT3JkZXINCiAgICAgICAgICAgICAgKQ0KICAgICAgICAgICkNCiAgICAgICAgICAuY2F0Y2goKCkgPT4ge30pOw0KICAgICAgfSBlbHNlIGlmICgNCiAgICAgICAgdGhpcy5vcHRpb25zLnNvcnRCeVswXSAhPT0gdGhpcy5zb3J0Q29sdW1uIHx8DQogICAgICAgIHRoaXMub3B0aW9ucy5zb3J0RGVzY1swXSAhPT0gQm9vbGVhbih0aGlzLkRlc2NlbmRpbmdPcmRlcikNCiAgICAgICkgew0KICAgICAgICBjb25zb2xlLnRyYWNlKCk7DQogICAgICAgIHRoaXMuJHJvdXRlcg0KICAgICAgICAgIC5wdXNoKA0KICAgICAgICAgICAgIi9tZXNzYWdlcy8iICsgdGhpcy5wYWdpbmcoMSwgdGhpcy5zb3J0Q29sdW1uLCB0aGlzLmRlc2NlbmRpbmdPcmRlcikNCiAgICAgICAgICApDQogICAgICAgICAgLmNhdGNoKCgpID0+IHt9KTsNCiAgICAgIH0NCiAgICB9LA0KICB9LA0KICBkZXN0cm95ZWQoKSB7DQogICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoInJlc2l6ZSIsIHRoaXMuaGFuZGxlV2luZG93UmVzaXplKTsNCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigicmVzaXplIiwgdGhpcy5oYW5kbGVXaW5kb3dSZXNpemUpOw0KICAgIHRoaXMuaGFuZGxlV2luZG93UmVzaXplKCk7DQogICAgdGhpcy50b29sQmFySGVpZ2h0ID0gdGhpcy4kcmVmcy5tc2dMaXN0VG9vbGJhci5jb21wdXRlZENvbnRlbnRIZWlnaHQ7DQogICAgbGV0IG9wdGlvbnMgPSB7DQogICAgICBQYWdlTnVtYmVyOiBOdW1iZXIodGhpcy5wYWdlTnVtYmVyKSwNCiAgICAgIFBhZ2VTaXplOiAyNSwNCiAgICAgIFNvcnRDb2x1bW46IHRoaXMuc29ydENvbHVtbiwNCiAgICAgIERlc2NlbmRpbmdPcmRlcjogQm9vbGVhbih0aGlzLkRlc2NlbmRpbmdPcmRlciksDQogICAgfTsNCg0KICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJtZXNzYWdlcy9nZXRNZXNzYWdlcyIsIG9wdGlvbnMpLnRoZW4oKHJlc3BvbmNlKSA9PiB7DQogICAgICB0aGlzLm1lc3NhZ2VMaXN0ID0gcmVzcG9uY2UuZGF0YS5tZXNzYWdlTGlzdDsNCiAgICAgIHRoaXMucm93c0NvdW50ID0gcmVzcG9uY2UuZGF0YS5yb3dzQ291bnQ7DQogICAgICB0aGlzLm9wdGlvbnMucGFnZSA9IG9wdGlvbnMuUGFnZU51bWJlcjsNCiAgICAgIHRoaXMub3B0aW9ucy5zb3J0QnkgPSBbb3B0aW9ucy5Tb3J0Q29sdW1uXTsNCiAgICAgIHRoaXMub3B0aW9ucy5zb3J0RGVzYyA9IFtvcHRpb25zLkRlc2NlbmRpbmdPcmRlcl07DQogICAgfSk7DQogIH0sDQp9Ow0K"},{"version":3,"sources":["Messages.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAqBA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Messages.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <v-card dark flat class=\"fill-height\" tile>\r\n    <v-toolbar ref=\"msgListToolbar\" color=\"primary\" dense flat>\r\n      <v-toolbar-title>Список сообщений</v-toolbar-title>\r\n      <v-spacer />\r\n      <v-btn :icon=\"isXS\" :to=\"createMessagePath\" text>\r\n        <v-icon :left=\"!isXS\">mdi-pen</v-icon>\r\n        {{isXS ? '' : 'Добавить сообщение'}}\r\n      </v-btn>\r\n    </v-toolbar>\r\n    <v-data-table\r\n      :height=\"tableHeight\"\r\n      :headers=\"headers\"\r\n      :items=\"messageList\"\r\n      :server-items-length=\"rowsCount\"\r\n      :options.sync=\"options\"\r\n    />\r\n  </v-card>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"Messages\",\r\n\r\n  props: [\"pageNumber\", \"sortColumn\", \"descendingOrder\"],\r\n\r\n  data() {\r\n    return {\r\n      // Element resizing\r\n      toolBarHeight: undefined,\r\n      windowHeight: 0,\r\n\r\n      headers: [\r\n        {\r\n          text: \"Дата добавления\",\r\n          align: \"center\",\r\n          sortable: true,\r\n          value: \"dateC\",\r\n        },\r\n        {\r\n          text: \"Имя пользователя\",\r\n          align: \"start\",\r\n          sortable: true,\r\n          value: \"userName\",\r\n        },\r\n        { text: \"E-mail\", align: \"start\", sortable: true, value: \"email\" },\r\n        { text: \"Текст\", align: \"start\", sortable: false, value: \"text\" },\r\n      ],\r\n      messageList: [],\r\n      rowsCount: 0,\r\n      options: null,\r\n    };\r\n  },\r\n  computed: {\r\n    tableHeight() {\r\n      if (this.toolBarHeight !== undefined)\r\n        return this.windowHeight - this.toolBarHeight - 59;\r\n      return undefined;\r\n    },\r\n    isXS() {\r\n      return this.$vuetify.breakpoint.xs;\r\n    },\r\n\r\n    createMessagePath() {\r\n      return (\r\n        \"/create-message/\" +\r\n        this.paging(this.pageNumber, this.sortColumn, this.descendingOrder)\r\n      );\r\n    },\r\n  },\r\n  methods: {\r\n    handleWindowResize() {\r\n      this.windowHeight = window.innerHeight;\r\n    },\r\n    paging(pageNumber, sortColumn, descendingOrder) {\r\n      return pageNumber + \",\" + sortColumn + \",\" + descendingOrder;\r\n    },\r\n  },\r\n  watch: {\r\n    options: function () {\r\n      console.info(\r\n        this.options.page,\r\n        Number(this.pageNumber),\r\n        this.options.sortBy[0],\r\n        this.sortColumn\r\n      );\r\n      if (this.options.page !== Number(this.pageNumber)) {\r\n        console.trace();\r\n        this.$router\r\n          .push(\r\n            \"/messages/\" +\r\n              this.paging(\r\n                this.pageNumber,\r\n                this.sortColumn,\r\n                this.descendingOrder\r\n              )\r\n          )\r\n          .catch(() => {});\r\n      } else if (\r\n        this.options.sortBy[0] !== this.sortColumn ||\r\n        this.options.sortDesc[0] !== Boolean(this.DescendingOrder)\r\n      ) {\r\n        console.trace();\r\n        this.$router\r\n          .push(\r\n            \"/messages/\" + this.paging(1, this.sortColumn, this.descendingOrder)\r\n          )\r\n          .catch(() => {});\r\n      }\r\n    },\r\n  },\r\n  destroyed() {\r\n    window.removeEventListener(\"resize\", this.handleWindowResize);\r\n  },\r\n  mounted() {\r\n    window.addEventListener(\"resize\", this.handleWindowResize);\r\n    this.handleWindowResize();\r\n    this.toolBarHeight = this.$refs.msgListToolbar.computedContentHeight;\r\n    let options = {\r\n      PageNumber: Number(this.pageNumber),\r\n      PageSize: 25,\r\n      SortColumn: this.sortColumn,\r\n      DescendingOrder: Boolean(this.DescendingOrder),\r\n    };\r\n\r\n    this.$store.dispatch(\"messages/getMessages\", options).then((responce) => {\r\n      this.messageList = responce.data.messageList;\r\n      this.rowsCount = responce.data.rowsCount;\r\n      this.options.page = options.PageNumber;\r\n      this.options.sortBy = [options.SortColumn];\r\n      this.options.sortDesc = [options.DescendingOrder];\r\n    });\r\n  },\r\n};\r\n</script>"]}]}